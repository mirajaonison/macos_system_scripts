on getFlag(somefile)	set fileType to (do shell script "file -b " & somefile)	if fileType ends with "directory" then		set flag to (do shell script "ls -lO " & somefile & "| sed -n 2p | cut -d' ' -f9")		return flag	end if	return (do shell script "ls -lO " & somefile & "| cut -d' ' -f7")end getFlagon run {input, parameters}	repeat with element in input		set p to POSIX path of element		set flag to getFlag(p)		if (flag is equal to "hidden") then			do shell script "chflags -R nohidden " & p		else			do shell script "chflags -R hidden " & p		end if	end repeatend run